{% extends "relatorios_base.html" %}

{# Define uma Unidade Requisitante padrão, já que é um relatório gerencial #}
{% block unidade_requisitante %}ADMINISTRAÇÃO GERAL{% endblock %} 

{% block relatorio_title %}{{ titulo_relatorio }}{% endblock %}

{% block relatorio_content %}
    <div class="title">
        {{ titulo_relatorio }}
    </div>
    
    <div class="section-box">
        <div class="section-title">Parâmetros do Relatório</div>
        <p style="font-size: 9pt;">
            Relatório gerado em: <strong>{{ data_geracao }}</strong>. Software: GestãoPRO v{{ versao_software }}.
        </p>
    </div>

    <div class="section-box">
        <div class="section-title">Dados Detalhados</div>
        <table class="items-table">
            <thead>
                <tr>
                    {% for coluna in colunas %}
                        <th>{{ coluna.header }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% if resultados %}
                    {% for item in resultados %}
                    <tr>
                        {% for coluna in colunas %}
                            {# Tenta alinhar à direita para campos que parecem ser numéricos (como valor, qtd ou id) #}
                            {% set align_class = 'text-right' if 'valor' in coluna.key or 'qtd' in coluna.key or 'total' in coluna.key or 'id' in coluna.key else 'item-description' %}
                            <td class="{{ align_class }}">
                                {{ item[coluna.key] }}
                            </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="{{ colunas|length }}">Nenhum dado encontrado.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    
    {# Inclui o footer de rastreamento do documento #}
    <footer class="footer">
        <p style="text-align: center; font-size: 8pt; color: #777;">
            Gerado em: {{ data_geracao }} | GestãoPRO v{{ versao_software }}
        </p>
    </footer>

{% endblock %}