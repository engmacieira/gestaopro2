{% extends "base.html" %}

{% block title %}Ferramentas de Importação - GestãoPRO{% endblock %}

{% block content %}
<div id="notification-area"></div>

<header class="main-header">
    {# Alterado url_for para request.app.url_path_for (verificar nome 'home_ui') #}
    <a href="{{ request.app.url_path_for('home_ui') }}" class="back-link">
        &larr; Voltar para o Painel de Controle
    </a>
    <h1>Ferramentas de Importação</h1>
    <p class="subtitle">Envie múltiplos contratos ou itens de uma só vez usando um arquivo .xlsx.</p>
</header>

<div class="tabs-container">
    <div class="tabs-nav">
        <button class="tab-link active" data-tab="tab-contratos">
            <i class="fa-solid fa-file-signature"></i> Importar Contratos
        </button>
        <button class="tab-link" data-tab="tab-itens">
            <i class="fa-solid fa-file-excel"></i> Importar Itens em Massa
        </button>
    </div>

    <div id="tab-contratos" class="tab-content active">
        {# INCLUINDO COMPONENTE DE CONTRATOS (Já verificado) #}
        {% include '_import_tab_contratos.html' %}
    </div>

    <div id="tab-itens" class="tab-content">
        {# INCLUINDO COMPONENTE DE ITENS (Já verificado) #}
        {% include '_import_tab_itens_global.html' %}
    </div>
</div>
{% endblock %}

{% block scripts %}
{# Bloco de scripts agora apenas inclui o ficheiro externo #}
{# Passa as URLs de redirecionamento para o JS #}
<script>
    const redirectUrlContratos = "{{ request.app.url_path_for('contratos_ui') }}";
    const redirectUrlItens = "{{ request.app.url_path_for('contratos_ui') }}"; // Ajustar se necessário
</script>
<script src="{{ request.app.url_path_for('static', path='js/importar.js') }}" defer></script>
{% endblock %}